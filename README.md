---
---
# aws-iot-dragonconnect-c

# Introduction
The DragonConnect project demonstrates recording events originating from
the DragonBoard and managing an LED.  The events are generated by pressing
the volume up and volume down keys on the DragonBoard.  When one of the
buttons is pressed, a client application written using the Amazon IoT C SDK
for embedded platforms uses MQTT to transfer the event to an Amazon data
center where it is stored in a DynamoDB table.

The LED is managed through the General Purpose IO (GPIO) of the DragonBoard
and uses AWS IoT Device Shadows.  The LED is controlled using the same
application that recorded the volume events.

# Getting Started
In order to run this demonstrations, you will need

* An Amazon account
* A breadboard
* Wire
* LED
* 50 m&#x2126; resisitor

## Completing the Circuit

**NOTE:** Please ensure that your DragonBoard is powered off and the power
supply has been disconnected from the DragonBoard.  This is a good practice
that will help reduce the chances of an accidental short circuit that could
damage your single board computer.

Follow the steps below to complete the circuit

* Connect one end of the wire from the GPIO 12 (positive) position to a row (m) in the breadboard
* Connect one end of the resistor in the same row as the wire from GPIO 12 (m)
* Connect the other end of the resistor to to a different row (n)
* Connect the anode of the LED in the same row (n)
* Connect the cathode of the LED to a different row (o)
* Connect the ground from the GPIO (pin 2) to the row with the LED cathode (o)

Your circuit should look similar to the following

![DragonBoard Manage LED Breadboard](docs/ManageLED_breadboard.png)

## Configure the AWS Services

The components of DragonConnect use the Amazon services as outlined in the
following table

Component | Source Directory | AWS Services | Tools
----------|------------------|--------------|------
Configuration | config | | JavaScript
Administration | admin | IAM, IoT, DynamoDB | Node, JavaScript
Web | ui | s3 | AWS CLI
Lambda | lambda | IoT, Lambda, DynamoDB | Node, JavaScript, Grunt
API | api | API Gateway | UNIX (sed), Swagger, Java

The following steps provide an overview of the steps to configure and deploy
the DragonConnect example.  Each step may include installing the tools needed
to complete it

1.  Configure the Amazon deployment region and account number in the Configuration component
1.  Configure the foundational elements of DragonConnect
1.  Deploy the lambda functions
1.  Configure and deploy the API Gateway component
1.  Configure and deploy the static HTML pages
1.  Create and configure a thing
1.  Start the client application

The instructions assume that you are performing the steps on the DragonBoard
running Debian / Ubuntu and that the following tools are available

* Node
  * Amazon Lambda currently uses nodejs v0.10.36.  This should be updated as Amazon updates its nodejs version
* Java 8
* Python and the AWS CLI

### General Configuration

The general configuration is used by the admin and lambda modules.  Please
update the index.js script to include the AWS deployment region and account
number.  For example

> region: 'us-east-1',
> accountNumber: '012345678901',

### Foundational Elements

The foundational elements involve configuring the IAM and IoT services as well
as creating the DynamoDB table.  The instructions assume that the working
directory is the 

```sh
$ cd admin
$ npm install ../config
```
